import{D as h,u as p,J as S,C as f,o as g,c as w,a as e,t as y,G as r,I as d,j as x,i as C,v as $,x as b,e as _,w as M,F as U,d as k}from"./index-816914e0.js";import{u as m}from"./useCardRotate-e7a7a8c2.js";import{s as R}from"./setDraaideurHeight-6e7d5141.js";const B={class:"card"},D=e("header",null,"My account",-1),E=e("dt",null,"Screen name:",-1),P=e("dt",null,"Email address",-1),V=e("dt",null,"Password",-1),A=e("dd",null,"******",-1),L={__name:"MyAccountCard",setup(v){const u=h(),t=p();async function l(){if(t.status!==!0){const{data:a,error:n}=await d.auth.getUser();n?(u.push({name:"login"}),console.log("error:",n)):(t.email=a.user.email,t.screenname=a.user.user_metadata.screenname,t.username=a.user.email,t.status=!0,t.uid=a.user.id)}}return S(()=>{l()}),f(()=>{console.log(t.username)}),(a,n)=>(g(),w("div",B,[D,e("main",null,[e("dl",null,[E,e("dd",null,y(r(t).screenname),1),P,e("dd",null,y(r(t).email),1),V,A])]),e("footer",null,[e("button",{onClick:n[0]||(n[0]=(...s)=>r(m)&&r(m)(...s))},"change")])]))}},N={class:"card"},F=e("header",null,"My account",-1),T=e("label",null,"Screen name",-1),j=e("label",{for:"account-email"},"Email address",-1),G=["value"],H=e("label",{for:"account-password"},"Password (leave empty to keep current)",-1),I=e("input",{type:"password",value:"",id:"account-password"},null,-1),J=e("button",null,"Save and return",-1),W={__name:"MyAccountEditCard",setup(v){const u=h(),t=p();async function l(){const{data:s,error:c}=await d.auth.getUser();if(console.log("---------data:",s),t.status!==!0){const{data:o,error:i}=await d.auth.getUser();console.log("---------data:",o),i?(u.push({name:"login"}),console.log("error:",i)):(t.email=o.user.email,t.screenname=o.user.user_metadata.screenname,t.username=o.user.email,t.status=!0,t.uid=o.user.id)}console.log("data.user.id:",s.user.id)}async function a(s){const c=t.screenname,{data:o,error:i}=await d.auth.updateUser({data:{screenname:c}});i?console.log(i):console.log("data:",o),l(),m()}async function n(){const{data:s}=await d.auth.getUser();t.email=s.user.email,t.screenname=s.user.user_metadata.screenname,m()}return S(()=>{l()}),f(()=>{console.log(t.username)}),(s,c)=>(g(),w("div",N,[F,e("main",null,[e("form",{onSubmit:x(a,["prevent"])},[T,C(e("input",{type:"text",id:"account-screenname","onUpdate:modelValue":c[0]||(c[0]=o=>r(t).screenname=o)},null,512),[[$,r(t).screenname]]),j,e("input",{type:"email",value:r(t).email,id:"account-email"},null,8,G),H,I,J],32)]),e("footer",null,[e("a",{onClick:n},"Return without saving")])]))}},q={class:"cards-draaideur"},z={class:"axis"},X={__name:"ProfilePage",setup(v){h();const u=p();return console.log("authStore:",u),f(()=>{R()}),(t,l)=>{const a=b("RouterLink");return g(),w(U,null,[e("div",q,[e("div",z,[_(L),_(W)])]),_(a,{to:"logout"},{default:M(()=>[k("Log out")]),_:1})],64)}}};export{X as default};
