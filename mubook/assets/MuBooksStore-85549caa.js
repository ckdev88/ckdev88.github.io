import{z as a,r as n}from"./index-4cdf0591.js";const g=a("AlertStore",{state:()=>({currentAlert:null,active:!1})}),r=g(),u=a("MuBooksStore",{state:()=>({bookList:n(JSON.parse(localStorage.getItem("MyBooks"))),loading:!1}),getters:{getBookList(){return this.bookList},getSmallBooks(){return this.bookList.filter(t=>t.pages<150)},getSavedBooks(){return this.bookList},getReadingBook(){return console.log("asdasd",this.bookList.filter(t=>t.reading===!0)),this.bookList.filter(t=>t.reading===!0)}},actions:{saveBookToggle(t,e){this.booklist[t].saved=!this.booklist[t].saved,this.booklist[t].saved===!0&&this.addMyBook(e)},addBookReading(t){console.log("start action addBookReading");let e=JSON.parse(localStorage.getItem("MyBooks")),o=[];var i,l;for(let s=0;s<e.length;s++)e[s].title==t.title?(l=!0,i=!1):(l=!1,i=!0),o.push({title:e[s].title,date_published:e[s].date_published,authors:e[s].authors,pages:e[s].pages,image:e[s].image,reading:l,finished:i});localStorage.setItem("MyBooks",JSON.stringify(o)),this.bookList=e,r.currentAlert="Added book to reading",setTimeout(()=>{r.currentAlert=null},3e3)},endBookReading(t){console.log("start action endBookReading"),console.log("endReadingBook...");let e=JSON.parse(localStorage.getItem("MyBooks"));console.log("myBooks:",e);let o=[];var i,l;for(let s=0;s<e.length;s++)console.log(e[s].title),console.log(t.title),e[s].title==t.title?(console.log("oi?"),i=!1,l=!0):(console.log("oal"),i=e[s].reading,l=e[s].finished),o.push({title:e[s].title,date_published:e[s].date_published,authors:e[s].authors,pages:e[s].pages,image:e[s].image,reading:i,finished:l});console.log("newArr in endBookReading:",o),localStorage.setItem("MyBooks",JSON.stringify(o)),this.bookList=e,r.currentAlert="Finished reading",setTimeout(()=>{r.currentAlert=null},3e3),console.log("new MyBooks:",JSON.parse(localStorage.getItem("MyBooks")))},addMyBook(t,e=!1){console.log("add book");let o=JSON.parse(localStorage.getItem("MyBooks"));return o||(o=[]),o.push({title:t.title,date_published:t.date_published,authors:t.authors,pages:t.pages,image:"https://images.isbndb.com/covers"+t.image,reading:e,finished:!1}),localStorage.setItem("MyBooks",JSON.stringify(o)),this.bookList=o,r.currentAlert="Added book",setTimeout(()=>{r.currentAlert=null},3e3),console.log("this.bookList (addMyBook):",this.bookList),this.bookList},isSaved(t){const e=this.bookList;if(e){for(let o=0;o<e.length;o++)if(e[o].title===t.title)return!0}return!1},isReading(t){console.log("check is reading");const e=this.bookList;if(e){for(let o=0;o<e.length;o++)if(e[o].reading===t.reading)return!0}return!1},isFinished(t){const e=this.bookList;if(e){for(let o=0;o<e.length;o++)if(e[o].finished===t.finished)return!0}return!1},removeMyBook(t){let e=JSON.parse(localStorage.getItem("MyBooks"));if(!e)console.log("there is nothing to remove");else{let o=[];for(let i=0;i<e.length;i++)e[i].title!==t.title&&o.push({title:e[i].title,date_published:e[i].date_published,authors:e[i].authors,image:e[i].image,pages:e[i].pages,reading:e[i].reading,finished:e[i].finished});localStorage.setItem("MyBooks",JSON.stringify(o)),this.bookList=o,console.log("removed book",this.bookList),r.currentAlert="Removed book",setTimeout(()=>{r.currentAlert=null},3e3)}}}});export{g as a,u};
