import{y as h,D as b,r as g,E as S,o as f,c as v,a as e,i as $,h as u,v as c,u as d,G as w,H as y,g as C,f as k,p as U,l as x}from"./index-3260f57b.js";import{u as _}from"./useCardRotate-644bae83.js";const E={class:"card",id:"card-login"},R=e("header",null,"Log in",-1),V=e("label",{for:"email"},"Email",-1),A=e("label",{for:"password"},"Password",-1),B=e("button",null,"Log in",-1),Q={__name:"LoginCard",setup(l){const n=h(),m=b();let s=g(""),t=g("");async function i(){console.log("login account");const{data:a,error:o}=await y.auth.signInWithPassword({email:s.value,password:t.value});o?console.log(o):(n.setLoginStatus(!0),n.setEmail(a.session.user.email),n.setUsername(a.session.user.email),n.setUid(a.session.user.id),n.setScreenname(a.session.user.user_metadata.screenname),m.push({name:"dashboard"}))}return S(()=>{console.log("loginstatus in loginpage.vue:",n.status)}),(a,o)=>(f(),v("article",E,[R,e("main",null,[e("form",{onSubmit:$(i,["prevent"])},[V,u(e("input",{type:"email",id:"login-email","onUpdate:modelValue":o[0]||(o[0]=r=>w(s)?s.value=r:s=r),required:""},null,512),[[c,d(s)]]),A,u(e("input",{type:"password",id:"login-password","onUpdate:modelValue":o[1]||(o[1]=r=>w(t)?t.value=r:t=r)},null,512),[[c,d(t)]]),B],32)]),e("footer",null,[e("a",{onClick:o[2]||(o[2]=r=>d(_)("login","recover"))},"Forgot password"),e("a",{onClick:o[3]||(o[3]=r=>d(_)("login","signup"))},"New here? Join now.")])]))}},I={class:"card",id:"card-signup"},L=e("header",null,"Create an account",-1),q=e("label",{for:"screenname"},"Screen name",-1),D=e("label",{for:"email"},"Email address: *",-1),M=e("label",{for:"password"},"Password: *",-1),N=e("button",null,"Create",-1),P={class:"content-right"},X={__name:"SignupCard",setup(l){const n=h(),m=b(),s=C({screenname:"",email:"",password:""});async function t(){console.log("create account"),console.log("email,password:",s.email,s.password);const{data:i,error:a}=await y.auth.signUp({email:s.email,password:s.password,options:{data:{screenname:s.screenname}}});a?console.log(a):(console.log("adding user:",i),console.log(" user:",i.user.id),n.setEmail(s.email),n.setScreenname(s.screenname),n.setUid(i.user.id),console.log("Account created, referring..."),m.push({name:"checkmail"}))}return(i,a)=>(f(),v("article",I,[L,e("main",null,[e("form",{onSubmit:$(t,["prevent"])},[q,u(e("input",{type:"text",id:"signup-screenname","onUpdate:modelValue":a[0]||(a[0]=o=>s.screenname=o)},null,512),[[c,s.screenname]]),D,u(e("input",{type:"email",id:"signup-email","onUpdate:modelValue":a[1]||(a[1]=o=>s.email=o),required:""},null,512),[[c,s.email]]),M,u(e("input",{type:"password",id:"signup-password","onUpdate:modelValue":a[2]||(a[2]=o=>s.password=o),required:""},null,512),[[c,s.password]]),N],32)]),e("footer",P,[e("a",{onClick:a[3]||(a[3]=o=>d(_)("signup","login"))},"Already have an account")])]))}},F="/mubook/img/recover-icon.png";const p=l=>(U("data-v-b899ea4d"),l=l(),x(),l),O={class:"card",id:"card-recover"},W=p(()=>e("img",{src:F,width:"82",height:"82",alt:"",class:"recover-icon"},null,-1)),G=p(()=>e("header",null,"Forgot your password? Don't worry. Let's get it back.",-1)),H=p(()=>e("label",{for:"recover-email"},"Email address: *",-1)),J=p(()=>e("p",null,"We'll send a link to this email if it matches an existing MuBOOKS account.",-1)),K=p(()=>e("button",null,"Next",-1)),T={__name:"RecoverCard",setup(l){const n=g("");return(m,s)=>(f(),v("article",O,[W,G,e("main",null,[e("form",null,[H,u(e("input",{type:"email",id:"recover-email","onUpdate:modelValue":s[0]||(s[0]=t=>n.value=t),required:""},null,512),[[c,n.value]]),J,K])]),e("footer",null,[e("button",{onClick:s[1]||(s[1]=t=>d(_)("recover","login")),class:"alt"},"Back")])]))}},Y=k(T,[["__scopeId","data-v-b899ea4d"]]);export{Y as R,Q as _,X as a};
