import{z as a,r as n}from"./index-d7537a0a.js";const g=a("AlertStore",{state:()=>({currentAlert:null,active:!1})}),l=g(),h=a("MuBooksStore",{state:()=>({bookList:n(JSON.parse(localStorage.getItem("MyBooks"))),loading:!1}),getters:{getBookList(){return this.bookList},getSmallBooks(){return this.bookList.filter(o=>o.pages<150)},getSavedBooks(){return this.bookList}},actions:{saveBookToggle(o,e){this.booklist[o].saved=!this.booklist[o].saved,this.booklist[o].saved===!0&&this.addMyBook(e)},addBookReading(o){console.log("start action addBookReading");let e=JSON.parse(localStorage.getItem("MyBooks")),t=[];var i,r;for(let s=0;s<e.length;s++)e[s].title==o.title?(r=!0,i=!1):(r=!1,i=!0),t.push({title:e[s].title,date_published:e[s].date_published,authors:e[s].authors,pages:e[s].pages,image:e[s].image,reading:r,finished:i});localStorage.setItem("MyBooks",JSON.stringify(t)),this.bookList=e,l.currentAlert="Added book to reading",setTimeout(()=>{l.currentAlert=null},3e3)},endBookReading(o){console.log("start action endBookReading"),console.log("endReadingBook...");let e=JSON.parse(localStorage.getItem("MyBooks"));console.log("myBooks:",e);let t=[];var i,r;for(let s=0;s<e.length;s++)console.log(e[s].title),console.log(o.title),e[s].title==o.title?(console.log("oi?"),i=!1,r=!0):(console.log("oal"),i=e[s].reading,r=e[s].finished),t.push({title:e[s].title,date_published:e[s].date_published,authors:e[s].authors,pages:e[s].pages,image:e[s].image,reading:i,finished:r});console.log("newArr in endBookReading:",t),localStorage.setItem("MyBooks",JSON.stringify(t)),this.bookList=e,l.currentAlert="Finished reading",setTimeout(()=>{l.currentAlert=null},3e3),console.log("new MyBooks:",JSON.parse(localStorage.getItem("MyBooks")))},addMyBook(o,e=!1){console.log("add book");let t=JSON.parse(localStorage.getItem("MyBooks"));return t||(t=[]),t.push({title:o.title,date_published:o.date_published,authors:o.authors,pages:o.pages,image:"https://images.isbndb.com/covers"+o.image,reading:e,finished:!1}),localStorage.setItem("MyBooks",JSON.stringify(t)),this.bookList=t,l.currentAlert="Added book",setTimeout(()=>{l.currentAlert=null},3e3),console.log("this.bookList (addMyBook):",this.bookList),this.bookList},isSaved(o){const e=this.bookList;if(e){for(let t=0;t<e.length;t++)if(e[t].title===o.title)return!0}return!1},isReading(o){console.log("check is reading");const e=this.bookList;if(e){for(let t=0;t<e.length;t++)if(e[t].reading===o.reading)return!0}return!1},isFinished(o){const e=this.bookList;if(e){for(let t=0;t<e.length;t++)if(e[t].finished===o.finished)return!0}return!1},removeMyBook(o){let e=JSON.parse(localStorage.getItem("MyBooks"));if(!e)console.log("there is nothing to remove");else{let t=[];for(let i=0;i<e.length;i++)e[i].title!==o.title&&t.push({title:e[i].title,date_published:e[i].date_published,authors:e[i].authors,image:e[i].image,pages:e[i].pages,reading:e[i].reading,finished:e[i].finished});localStorage.setItem("MyBooks",JSON.stringify(t)),this.bookList=t,console.log("removed book",this.bookList),l.currentAlert="Removed book",setTimeout(()=>{l.currentAlert=null},3e3)}}}});export{g as a,h as u};
