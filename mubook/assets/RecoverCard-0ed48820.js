import{u as h,E as b,r as g,G as y,o as f,c as v,a as e,k as $,j as u,v as c,f as d,H as w,I as S,i as k,h as C,p as U,n as x}from"./index-d42d1c64.js";import{u as _}from"./useCardRotate-5021ff9e.js";const E={class:"card",id:"card-login"},R=e("header",null,"Log in",-1),V=e("label",{for:"email"},"Email",-1),I=e("label",{for:"password"},"Password",-1),A=e("button",null,"Log in",-1),Q={__name:"LoginCard",setup(l){const a=h(),m=b();let s=g(""),t=g("");async function i(){console.log("login account");const{data:n,error:o}=await S.auth.signInWithPassword({email:s.value,password:t.value});o?console.log(o):(a.setLoginStatus(!0),a.setEmail(n.session.user.email),a.setUsername(n.session.user.email),a.setUid(n.session.user.id),a.setScreenname(n.session.user.user_metadata.screenname),m.push({name:"dashboard"}))}return y(()=>{console.log("loginstatus in loginpage.vue:",a.status)}),(n,o)=>(f(),v("article",E,[R,e("main",null,[e("form",{onSubmit:$(i,["prevent"])},[V,u(e("input",{type:"email",id:"login-email","onUpdate:modelValue":o[0]||(o[0]=r=>w(s)?s.value=r:s=r),required:""},null,512),[[c,d(s)]]),I,u(e("input",{type:"password",id:"login-password","onUpdate:modelValue":o[1]||(o[1]=r=>w(t)?t.value=r:t=r)},null,512),[[c,d(t)]]),A],32)]),e("footer",null,[e("a",{onClick:o[2]||(o[2]=r=>d(_)("login","recover"))},"Forgot password"),e("a",{onClick:o[3]||(o[3]=r=>d(_)("login","signup"))},"New here? Join now.")])]))}},B={class:"card",id:"card-signup"},L=e("header",null,"Create an account",-1),q=e("label",{for:"screenname"},"Screen name",-1),M=e("label",{for:"email"},"Email address: *",-1),N=e("label",{for:"password"},"Password: *",-1),P=e("button",null,"Create",-1),D={class:"content-right"},X={__name:"SignupCard",setup(l){const a=h(),m=b(),s=k({screenname:"",email:"",password:""});async function t(){console.log("create account"),console.log("email,password:",s.email,s.password);const{data:i,error:n}=await S.auth.signUp({email:s.email,password:s.password,options:{data:{screenname:s.screenname}}});n?console.log(n):(console.log("adding user:",i),console.log(" user:",i.user.id),a.setEmail(s.email),a.setScreenname(s.screenname),a.setUid(i.user.id),console.log("Account created, referring..."),m.push({name:"checkmail"}))}return(i,n)=>(f(),v("article",B,[L,e("main",null,[e("form",{onSubmit:$(t,["prevent"])},[q,u(e("input",{type:"text",id:"signup-screenname","onUpdate:modelValue":n[0]||(n[0]=o=>s.screenname=o)},null,512),[[c,s.screenname]]),M,u(e("input",{type:"email",id:"signup-email","onUpdate:modelValue":n[1]||(n[1]=o=>s.email=o),required:""},null,512),[[c,s.email]]),N,u(e("input",{type:"password",id:"signup-password","onUpdate:modelValue":n[2]||(n[2]=o=>s.password=o),required:""},null,512),[[c,s.password]]),P],32)]),e("footer",D,[e("a",{onClick:n[3]||(n[3]=o=>d(_)("signup","login"))},"Already have an account")])]))}},F="/mubook/img/recover-icon.png";const p=l=>(U("data-v-b899ea4d"),l=l(),x(),l),O={class:"card",id:"card-recover"},W=p(()=>e("img",{src:F,width:"82",height:"82",alt:"",class:"recover-icon"},null,-1)),j=p(()=>e("header",null,"Forgot your password? Don't worry. Let's get it back.",-1)),G=p(()=>e("label",{for:"recover-email"},"Email address: *",-1)),H=p(()=>e("p",null,"We'll send a link to this email if it matches an existing MuBOOKS account.",-1)),J=p(()=>e("button",null,"Next",-1)),K={__name:"RecoverCard",setup(l){const a=g("");return(m,s)=>(f(),v("article",O,[W,j,e("main",null,[e("form",null,[G,u(e("input",{type:"email",id:"recover-email","onUpdate:modelValue":s[0]||(s[0]=t=>a.value=t),required:""},null,512),[[c,a.value]]),H,J])]),e("footer",null,[e("button",{onClick:s[1]||(s[1]=t=>d(_)("recover","login")),class:"alt"},"Back")])]))}},Y=C(K,[["__scopeId","data-v-b899ea4d"]]);export{Y as R,Q as _,X as a};
