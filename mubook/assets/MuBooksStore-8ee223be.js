import{z as a}from"./index-9a117e3d.js";const n=a("AlertStore",{state:()=>({currentAlert:null,active:!1})}),r=n(),d=a("MuBooksStore",{state:()=>({bookList:JSON.parse(localStorage.getItem("MyBooks")),loading:!1}),getters:{getBookList(){return this.bookList},getSmallBooks(){return this.bookList.filter(e=>e.pages<150)},getSavedBooks(){return this.bookList},getReadingBook(){return this.bookList.filter(e=>e.reading===!0)}},actions:{saveBookToggle(e,o){this.booklist[e].saved=!this.booklist[e].saved,this.booklist[e].saved===!0&&this.addMyBook(o)},addBookReading(e){console.log("start action addBookReading");let o=JSON.parse(localStorage.getItem("MyBooks"));if(o[e].reading===!1){for(let t=0;t<o.length;t++)o[t].reading=!1;o[e].reading=!o[e].reading,o[e].reading===!0&&(o[e].finished=!1)}localStorage.setItem("MyBooks",JSON.stringify(o)),this.bookList=o,r.currentAlert="marked book as reading",setTimeout(()=>{r.currentAlert=null},3e3)},endBookReading(e){console.log("start action endBookReading"),console.log("endReadingBook...");let o=JSON.parse(localStorage.getItem("MyBooks"));console.log("myBooks:",o);let t=[];var l,i;for(let s=0;s<o.length;s++)console.log(o[s].title),console.log(o[e].title),s===e?(console.log("oi?"),l=!1,i=!0):(console.log("oal"),l=o[s].reading,i=o[s].finished),t.push({title:o[s].title,date_published:o[s].date_published,authors:o[s].authors,pages:o[s].pages,image:o[s].image,reading:l,finished:i});console.log("newArr in endBookReading:",t),localStorage.setItem("MyBooks",JSON.stringify(t)),this.bookList=o,r.currentAlert="Finished reading",setTimeout(()=>{r.currentAlert=null},3e3),console.log("new MyBooks:",JSON.parse(localStorage.getItem("MyBooks")))},addMyBook(e,o=!1){console.log("add book");let t=JSON.parse(localStorage.getItem("MyBooks"));return t||(t=[]),t.push({title:e.title,date_published:e.date_published,authors:e.authors,pages:e.pages,image:"https://images.isbndb.com/covers"+e.image,reading:o,finished:!1}),localStorage.setItem("MyBooks",JSON.stringify(t)),this.bookList=t,r.currentAlert="Added book",setTimeout(()=>{r.currentAlert=null},3e3),console.log("this.bookList (addMyBook):",this.bookList),this.bookList},isSaved(e){const o=this.bookList;if(o){for(let t=0;t<o.length;t++)if(o[t].title===e.title)return!0}return!1},isReading(e){console.log("-------------"),console.log(e),console.log(this.bookList),console.log("rrrrrrrrrrrrr")},isFinished(e){return console.log("this.booklist:",this.booklist),!1},removeMyBook(e){let o=JSON.parse(localStorage.getItem("MyBooks"));o?(o.splice(e,1),localStorage.setItem("MyBooks",JSON.stringify(o)),this.bookList=o,console.log("removed book",this.bookList),r.currentAlert="Removed book",setTimeout(()=>{r.currentAlert=null},3e3)):console.log("there is nothing to remove")}}});export{n as a,d as u};
